"use strict";(self.webpackChunkemailclient=self.webpackChunkemailclient||[]).push([[347],{4347:(A,u,m)=>{m.r(u),m.d(u,{InboxModule:()=>k});var c=m(6895),a=m(433),s=m(978),h=m(262),_=m(515),e=m(8256),v=m(529);let p=(()=>{class n{constructor(t){this.http=t,this.apiUrl="https://api.angular-email.com/emails"}getEmails(){return this.http.get(this.apiUrl)}getEmail(t){return this.http.get(this.apiUrl+"/"+t)}sendEmail(t){return this.http.post(this.apiUrl,t)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(v.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),g=(()=>{class n{constructor(t,o){this.emailService=t,this.router=o}resolve(t){const{id:o}=t.params;return this.emailService.getEmail(o).pipe((0,h.K)(()=>(this.router.navigateByUrl("/inbox/not-found"),_.E)))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(p),e.LFG(s.F0))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),C=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-email-placeholder"]],decls:4,vars:0,consts:[[1,"ui","placeholder","segment"],[1,"ui","icon","header"],[1,"envelope","outline","icon"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"i",2),e._uU(3," Select an email to get started. "),e.qZA()())}}),n})();const T=[[["","modalTitle",""]],"*",[["","modalFooter",""]]],y=["[modalTitle]","*","[modalFooter]"];let d=(()=>{class n{constructor(t){this.el=t,this.dismiss=new e.vpe}ngOnInit(){document.body.appendChild(this.el.nativeElement)}ngOnDestroy(){this.el.nativeElement.remove()}onDismissClick(){this.dismiss.emit()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-modal"]],outputs:{dismiss:"dismiss"},ngContentSelectors:y,decls:12,vars:0,consts:[[1,"ui","dimmer","visible","active",3,"click"],[1,"ui","modal","visible","active",3,"click"],[1,"close","icon",3,"click"],[1,"header"],[1,"content"],[1,"actions","actions-default"],[1,"ui","buttom","primary",3,"click"],[1,"actions"]],template:function(t,o){1&t&&(e.F$t(T),e.TgZ(0,"div",0),e.NdJ("click",function(){return o.onDismissClick()}),e.TgZ(1,"div",1),e.NdJ("click",function(r){return r.stopPropagation()}),e.TgZ(2,"i",2),e.NdJ("click",function(){return o.onDismissClick()}),e.qZA(),e.TgZ(3,"div",3),e.Hsn(4),e.qZA(),e.TgZ(5,"div",4),e.Hsn(6,1),e.qZA(),e.TgZ(7,"div",5)(8,"button",6),e.NdJ("click",function(){return o.onDismissClick()}),e._uU(9,"Ok"),e.qZA()(),e.TgZ(10,"div",7),e.Hsn(11,2),e.qZA()()())},styles:[".actions[_ngcontent-%COMP%]:empty{display:none}.actions-default[_ngcontent-%COMP%]{display:none}.actions[_ngcontent-%COMP%]:empty + .actions-default[_ngcontent-%COMP%]{display:block}"]}),n})();var b=m(235);let f=(()=>{class n{constructor(){this.emailSubmit=new e.vpe}ngOnInit(){const{subject:t,from:o,to:l,text:r}=this.email;this.emailForm=new a.cw({to:new a.NI(l,[a.kI.required,a.kI.email]),from:new a.NI({value:o,disabled:!0}),subject:new a.NI(t,[a.kI.required]),text:new a.NI(r,[a.kI.required])})}onSubmit(){this.emailForm.invalid||this.emailSubmit.emit(this.emailForm.value)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-email-form"]],inputs:{email:"email"},outputs:{emailSubmit:"emailSubmit"},decls:7,vars:5,consts:[[1,"ui","form",3,"formGroup","ngSubmit"],["label","To","inputType","email",3,"control"],["label","From","inputType","email",3,"control"],["label","Subject","inputType","text",3,"control"],["label","Content","controlType","textarea",3,"control"],[1,"ui","submit","button","primary"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e._UZ(1,"app-input",1)(2,"app-input",2)(3,"app-input",3)(4,"app-input",4),e.TgZ(5,"button",5),e._uU(6,"Send"),e.qZA()()),2&t&&(e.Q6J("formGroup",o.emailForm),e.xp6(1),e.Q6J("control",o.emailForm.get("to")),e.xp6(1),e.Q6J("control",o.emailForm.get("from")),e.xp6(1),e.Q6J("control",o.emailForm.get("subject")),e.xp6(1),e.Q6J("control",o.emailForm.get("text")))},dependencies:[b.a,a._Y,a.JL,a.sg]}),n})();function Z(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"app-modal",2),e.NdJ("dismiss",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.showModal=!1)}),e._UZ(1,"div",3),e._uU(2,"Reply "),e.TgZ(3,"app-email-form",4),e.NdJ("emailSubmit",function(l){e.CHM(t);const r=e.oxw();return e.KtG(r.onSubmit(l))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("email",t.email)}}let E=(()=>{class n{constructor(t){this.emailService=t,this.showModal=!1}ngOnInit(){}ngOnChanges(){const t=this.email.text.replace(/\n/gi,"\n>");this.email={...this.email,from:this.email.to,to:this.email.from,subject:`Re: ${this.email.subject}`,text:`\n\n\n---------- ${this.email.from} wrote: \n> ${t}`}}onSubmit(t){this.emailService.sendEmail(t).subscribe(()=>this.showModal=!1)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-email-reply"]],inputs:{email:"email"},features:[e.TTD],decls:3,vars:1,consts:[[1,"ui","button","primary",3,"click"],[3,"dismiss",4,"ngIf"],[3,"dismiss"],["modalTitle",""],[3,"email","emailSubmit"]],template:function(t,o){1&t&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return o.showModal=!0}),e._uU(1,"Reply"),e.qZA(),e.YNc(2,Z,4,1,"app-modal",1)),2&t&&(e.xp6(2),e.Q6J("ngIf",o.showModal))},dependencies:[c.O5,d,f]}),n})(),x=(()=>{class n{constructor(t){this.route=t,this.email=this.route.snapshot.data.email,this.route.data.subscribe(o=>{this.email=o.email})}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(s.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-email-show"]],decls:16,vars:5,consts:[[1,"header"],[3,"email"],[1,"ui","divider"],[3,"innerHTML"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div")(2,"h3"),e._uU(3),e.qZA(),e.TgZ(4,"div"),e._uU(5," From: "),e.TgZ(6,"i"),e._uU(7),e.qZA()(),e.TgZ(8,"div"),e._uU(9," To: "),e.TgZ(10,"i"),e._uU(11),e.qZA()()(),e.TgZ(12,"div"),e._UZ(13,"app-email-reply",1),e.qZA()(),e._UZ(14,"div",2)(15,"div",3)),2&t&&(e.xp6(3),e.Oqu(o.email.subject),e.xp6(4),e.Oqu(o.email.from),e.xp6(4),e.Oqu(o.email.to),e.xp6(2),e.Q6J("email",o.email),e.xp6(2),e.Q6J("innerHTML",o.email.html,e.oJD))},dependencies:[E],styles:[".header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap}"]}),n})();var S=m(384);function w(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"app-modal",2),e.NdJ("dismiss",function(){e.CHM(t);const l=e.oxw();return e.KtG(l.showModal=!1)}),e.TgZ(1,"div",3),e._uU(2,"Compose"),e.qZA(),e.TgZ(3,"app-email-form",4),e.NdJ("emailSubmit",function(l){e.CHM(t);const r=e.oxw();return e.KtG(r.onSubmit(l))}),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("email",t.email)}}let F=(()=>{class n{constructor(t,o){this.authService=t,this.emailService=o,this.showModal=!1,this.email={id:"",to:"",subject:"",html:"",text:"",from:`${this.authService.username}@angular-email.com`}}ngOnInit(){}onSubmit(t){this.emailService.sendEmail(t).subscribe(()=>{this.showModal=!1})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(S.e),e.Y36(p))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-email-create"]],decls:3,vars:1,consts:[[1,"ui","button","inverted","primary","fluid",3,"click"],[3,"dismiss",4,"ngIf"],[3,"dismiss"],["modalTitle",""],[3,"email","emailSubmit"]],template:function(t,o){1&t&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return o.showModal=!0}),e._uU(1," Compose\n"),e.qZA(),e.YNc(2,w,4,1,"app-modal",1)),2&t&&(e.xp6(2),e.Q6J("ngIf",o.showModal))},dependencies:[c.O5,d,f],styles:[".ui.button.primary[_ngcontent-%COMP%]{margin-bottom:1rem}"]}),n})();function M(n,i){if(1&n&&(e.TgZ(0,"div",2)(1,"a",3)(2,"div",4)(3,"div",5),e._uU(4),e.qZA(),e.TgZ(5,"p",6),e._uU(6),e.qZA()()()()),2&n){const t=i.$implicit;e.xp6(1),e.Q6J("routerLink",t.id),e.xp6(3),e.hij(" ",t.subject," "),e.xp6(2),e.hij(" ",t.from," ")}}let I=(()=>{class n{constructor(t){this.emailService=t,this.emails=[]}ngOnInit(){this.emailService.getEmails().subscribe(t=>{this.emails=t})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-email-index"]],decls:2,vars:1,consts:[[1,"ui","celled","list"],["class","item",4,"ngFor","ngForOf"],[1,"item"],["routerLinkActive","active",3,"routerLink"],[1,"content"],[1,"header","trim"],[1,"trim"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.YNc(1,M,7,3,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",o.emails))},dependencies:[c.sg,s.yS,s.Od],styles:['.item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000}a.active[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center}a.active[_ngcontent-%COMP%]:before{content:">";font-size:20px;margin-right:10px}.content[_ngcontent-%COMP%]{width:90%}.trime[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;width:100%}']}),n})();const O=[{path:"",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-home"]],decls:6,vars:0,consts:[[1,"ui","grid","stackable"],[1,"five","wide","column"],[1,"eleven","wide","column"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"app-email-create")(3,"app-email-index"),e.qZA(),e.TgZ(4,"div",2),e._UZ(5,"router-outlet"),e.qZA()())},dependencies:[s.lC,F,I]}),n})(),children:[{path:"not-found",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-not-found"]],decls:4,vars:0,consts:[[1,"ui","placeholder","segment"],[1,"ui","icon","header"],[1,"search","icon"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"i",2),e._uU(3," Email not found. "),e.qZA()())}}),n})()},{path:":id",component:x,resolve:{email:g}},{path:"",component:C}]}];let U=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[s.Bz.forChild(O),s.Bz]}),n})();var J=m(4466);let k=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.ez,U,J.m,a.UX]}),n})()}}]);